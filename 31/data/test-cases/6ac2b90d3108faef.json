{"uid":"6ac2b90d3108faef","name":"KAFKA: Заполнение userdata исключая auth","fullName":"tests.kafka_tests.test_kafka#test_message_should_be_produced_to_userdata_after_kafka_event","historyId":"37d0a92236ad9bbc9a43e1bf5568b00e","time":{"start":1771526339953,"stop":1771526340088,"duration":135},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='exhibitions_1827', password='X,]>?aKi', submit_password='X,]>?aKi', first_name='Зиновий')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f6ff8fd23b0>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f6ff92c2a70>\nuser_db = <database.user_db.UserDb object at 0x7f6ff752f160>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1771526331721,"stop":1771526331721,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771526331721,"stop":1771526331721,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771526331722,"stop":1771526331722,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1771526331722,"stop":1771526331722,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771526331722,"stop":1771526331725,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"a5157709a68a25cb","name":"envs.json","source":"a5157709a68a25cb.json","type":"application/json","size":511}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Authority Db","time":{"start":1771526331725,"stop":1771526331914,"duration":189},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Client","time":{"start":1771526331914,"stop":1771526331914,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Registration User","time":{"start":1771526331914,"stop":1771526333429,"duration":1515},"status":"passed","steps":[{"name":"GET /register","time":{"start":1771526331946,"stop":1771526332730,"duration":784},"status":"passed","steps":[],"attachments":[{"uid":"bead904e7b468ae9","name":"Request","source":"bead904e7b468ae9.html","type":"text/html","size":2053},{"uid":"bfabe995a6b175a3","name":"aabb1957-a34a-4b18-b9be-062dd204aff3-attachment.txt","source":"bfabe995a6b175a3.txt","type":"text/plain","size":3731}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"POST /register","time":{"start":1771526332742,"stop":1771526333429,"duration":687},"status":"passed","steps":[],"attachments":[{"uid":"a6e8985b2af6d4df","name":"Request","source":"a6e8985b2af6d4df.html","type":"text/html","size":2710},{"uid":"98cf57e85f4b7551","name":"1389520a-658a-41e2-b85f-0e89e3529751-attachment.txt","source":"98cf57e85f4b7551.txt","type":"text/plain","size":2279}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"[S] Kafka","time":{"start":1771526339051,"stop":1771526339056,"duration":5},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] User Db","time":{"start":1771526339950,"stop":1771526339951,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Person Generator","time":{"start":1771526339951,"stop":1771526339952,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] User Data","time":{"start":1771526339952,"stop":1771526339952,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='exhibitions_1827', password='X,]>?aKi', submit_password='X,]>?aKi', first_name='Зиновий')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f6ff8fd23b0>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f6ff92c2a70>\nuser_db = <database.user_db.UserDb object at 0x7f6ff752f160>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","steps":[{"name":"Check new record in auth db","time":{"start":1771526340059,"stop":1771526340071,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Check new record in userdata db","time":{"start":1771526340071,"stop":1771526340087,"duration":16},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/tests/kafka_tests/test_kafka.py\", line 42, in test_message_should_be_produced_to_userdata_after_kafka_event\n    assert user_db.get_user_by_username(username).username == username\n","steps":[],"attachments":[{"uid":"b798fecde7a80585","name":"select niffler-userdata","source":"b798fecde7a80585.txt","type":"text/plain","size":27},{"uid":"4b07628c5f85430d","name":"select niffler-userdata","source":"4b07628c5f85430d.txt","type":"text/plain","size":23},{"uid":"29546ddf4ccbe0c5","name":"show niffler-userdata","source":"29546ddf4ccbe0c5.txt","type":"text/plain","size":32},{"uid":"b9cd7681c8540c25","name":"SELECT niffler-userdata","source":"b9cd7681c8540c25.txt","type":"text/plain","size":173}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"kafka::0","time":{"start":1771526379927,"stop":1771526379935,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Kafka"},{"name":"as_id","value":"600002"},{"name":"tag","value":"KAFKA"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"8912-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.kafka_tests.test_kafka"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":6,"skipped":0,"passed":0,"unknown":0,"total":6},"items":[{"uid":"d8dd82d5090914fb","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/30/#testresult/d8dd82d5090914fb","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771524786879,"stop":1771524787217,"duration":338}},{"uid":"26afc241ee06da5b","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/29/#testresult/26afc241ee06da5b","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771523338250,"stop":1771523338776,"duration":526}},{"uid":"a3bea73c647fbbd8","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/28/#testresult/a3bea73c647fbbd8","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771442809397,"stop":1771442809968,"duration":571}},{"uid":"947693e36afd12da","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/27/#testresult/947693e36afd12da","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771441718014,"stop":1771441718824,"duration":810}},{"uid":"3573d5b96b4d4e88","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/26/#testresult/3573d5b96b4d4e88","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771352549325,"stop":1771352549617,"duration":292}}]},"tags":["KAFKA"]},"source":"6ac2b90d3108faef.json","parameterValues":[]}