{"uid":"d689fa8b3c883755","name":"Отображение сообщения о неправильном логине или пароле","fullName":"tests.ui_tests.test_login_page#test_error_message_visibility_when_invalid_creds_on_login","historyId":"0e3115b40f4ce031a822cd6b45e5af61","time":{"start":1771442818765,"stop":1771442824419,"duration":5654},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nActual value: Bad credentials \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\".form__error\")\n    9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\n      - unexpected value \"Bad credentials\"","statusTrace":"page = <Page url='http://auth.niffler.dc:9000/login?error'>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', spend_db_url='postgresql...trap_servers='localhost:9093', userdata_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-userdata')\nlogin_page = <pages.login_page.LoginPage object at 0x7f2f29fb8ca0>\n\n    @allure.feature(\"Страница авторизации\")\n    @allure.title(\"Отображение сообщения о неправильном логине или пароле\")\n    def test_error_message_visibility_when_invalid_creds_on_login(page, envs, login_page):\n        login_page.send_user_name(envs.username)\n        login_page.send_password(\"invalid_password\")\n        login_page.click_login_button()\n>       login_page.check_invalid_creds_error_message()\n\ntests/ui_tests/test_login_page.py:33: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.login_page.LoginPage object at 0x7f2f29fb8ca0>\n\n    def check_invalid_creds_error_message(self):\n>       self.error_message.should_have_text(\"Неверные учетные данные пользователя\")\n\npages/login_page.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_factory.paragraph.Paragraph object at 0x7f2f2bdcfee0>\ntext = 'Неверные учетные данные пользователя', kwargs = {}\nlocator = <Locator frame=<Frame name= url='http://auth.niffler.dc:9000/login?error'> selector='.form__error'>\n\n    def should_have_text(self, text, **kwargs):\n        with allure.step(f'Проверить что {self.type_of} \"{self.name}\" содержит текст \"{text}\"'):\n            locator = self.get_locator(**kwargs)\n>           expect(locator).to_have_text(text)\nE           AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nE           Actual value: Bad credentials \nE           Call log:\nE             - Expect \"to_have_text\" with timeout 5000ms\nE             - waiting for locator(\".form__error\")\nE               9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\nE                 - unexpected value \"Bad credentials\"\n\npage_factory/component.py:65: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1771442799637,"stop":1771442799637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1771442799637,"stop":1771442799638,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771442799637,"stop":1771442799637,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771442799638,"stop":1771442799638,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771442799638,"stop":1771442799641,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"7dcce1900d9df8c","name":"envs.json","source":"7dcce1900d9df8c.json","type":"application/json","size":511}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Authority Db","time":{"start":1771442799641,"stop":1771442799806,"duration":165},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Registration User","time":{"start":1771442799806,"stop":1771442801397,"duration":1591},"status":"passed","steps":[{"name":"GET /register","time":{"start":1771442799848,"stop":1771442800804,"duration":956},"status":"passed","steps":[],"attachments":[{"uid":"2ab69c7881d2e26d","name":"Request","source":"2ab69c7881d2e26d.html","type":"text/html","size":2053},{"uid":"81b44f8d4cfcda8","name":"5d37021c-7174-4ba1-a8cf-4e4914544a62-attachment.txt","source":"81b44f8d4cfcda8.txt","type":"text/plain","size":3731}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"POST /register","time":{"start":1771442800811,"stop":1771442801397,"duration":586},"status":"passed","steps":[],"attachments":[{"uid":"9fcb40c74f008d5a","name":"Request","source":"9fcb40c74f008d5a.html","type":"text/html","size":2710},{"uid":"d0b951ee1117f4b4","name":"dcebcfc4-1248-4bb4-8637-79a46e3b6ac8-attachment.txt","source":"d0b951ee1117f4b4.txt","type":"text/plain","size":2279}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"[S] Auth Client","time":{"start":1771442799806,"stop":1771442799806,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Browser","time":{"start":1771442818271,"stop":1771442818631,"duration":360},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Page","time":{"start":1771442818631,"stop":1771442818764,"duration":133},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Login Page","time":{"start":1771442818764,"stop":1771442818764,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nActual value: Bad credentials \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\".form__error\")\n    9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\n      - unexpected value \"Bad credentials\"","statusTrace":"page = <Page url='http://auth.niffler.dc:9000/login?error'>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', spend_db_url='postgresql...trap_servers='localhost:9093', userdata_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-userdata')\nlogin_page = <pages.login_page.LoginPage object at 0x7f2f29fb8ca0>\n\n    @allure.feature(\"Страница авторизации\")\n    @allure.title(\"Отображение сообщения о неправильном логине или пароле\")\n    def test_error_message_visibility_when_invalid_creds_on_login(page, envs, login_page):\n        login_page.send_user_name(envs.username)\n        login_page.send_password(\"invalid_password\")\n        login_page.click_login_button()\n>       login_page.check_invalid_creds_error_message()\n\ntests/ui_tests/test_login_page.py:33: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.login_page.LoginPage object at 0x7f2f29fb8ca0>\n\n    def check_invalid_creds_error_message(self):\n>       self.error_message.should_have_text(\"Неверные учетные данные пользователя\")\n\npages/login_page.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_factory.paragraph.Paragraph object at 0x7f2f2bdcfee0>\ntext = 'Неверные учетные данные пользователя', kwargs = {}\nlocator = <Locator frame=<Frame name= url='http://auth.niffler.dc:9000/login?error'> selector='.form__error'>\n\n    def should_have_text(self, text, **kwargs):\n        with allure.step(f'Проверить что {self.type_of} \"{self.name}\" содержит текст \"{text}\"'):\n            locator = self.get_locator(**kwargs)\n>           expect(locator).to_have_text(text)\nE           AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nE           Actual value: Bad credentials \nE           Call log:\nE             - Expect \"to_have_text\" with timeout 5000ms\nE             - waiting for locator(\".form__error\")\nE               9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\nE                 - unexpected value \"Bad credentials\"\n\npage_factory/component.py:65: AssertionError","steps":[{"name":"Ввести в input \"Username\" значение \"Alex\"","time":{"start":1771442818765,"stop":1771442818959,"duration":194},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ввести в input \"Password\" значение \"invalid_password\"","time":{"start":1771442818959,"stop":1771442819044,"duration":85},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажать button  \"Log in\"","time":{"start":1771442819044,"stop":1771442819207,"duration":163},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить что text \"Error message\" содержит текст \"Неверные учетные данные пользователя\"","time":{"start":1771442819208,"stop":1771442824212,"duration":5004},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nActual value: Bad credentials \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\".form__error\")\n    9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\n      - unexpected value \"Bad credentials\"\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/page_factory/component.py\", line 65, in should_have_text\n    expect(locator).to_have_text(text)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"dce145e06261dc35","name":"screenshotе","source":"dce145e06261dc35.png","type":"image/png","size":601212}],"parameters":[],"stepsCount":4,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"browser::teardown","time":{"start":1771442824426,"stop":1771442824460,"duration":34},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Страница авторизации"},{"name":"host","value":"runnervmjduv7"},{"name":"thread","value":"8860-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui_tests.test_login_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":3},"items":[{"uid":"26627bf9fba6549a","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/27/#testresult/26627bf9fba6549a","status":"failed","statusDetails":"AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nActual value: Bad credentials \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\".form__error\")\n    9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\n      - unexpected value \"Bad credentials\"","time":{"start":1771441726176,"stop":1771441731840,"duration":5664}},{"uid":"aa1537a42471484f","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/26/#testresult/aa1537a42471484f","status":"failed","statusDetails":"AssertionError: Locator expected to have text 'Неверные учетные данные пользователя'\nActual value: Bad credentials \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\".form__error\")\n    9 × locator resolved to <p class=\"form__error\">Bad credentials</p>\n      - unexpected value \"Bad credentials\"","time":{"start":1771352589823,"stop":1771352595454,"duration":5631}}]},"tags":[]},"source":"d689fa8b3c883755.json","parameterValues":[]}