{"uid":"15b8c898b56243a6","name":"KAFKA: Заполнение userdata исключая auth","fullName":"tests.kafka_tests.test_kafka#test_message_should_be_produced_to_userdata_after_kafka_event","historyId":"37d0a92236ad9bbc9a43e1bf5568b00e","time":{"start":1771528579150,"stop":1771528579829,"duration":679},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='licking_1881', password='.tE>o~cW', submit_password='.tE>o~cW', first_name='Дарина')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f5a8c1f4190>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f5a8dddc3a0>\nuser_db = <database.user_db.UserDb object at 0x7f5a8c1f70d0>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1771528571280,"stop":1771528571280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771528571280,"stop":1771528571280,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1771528571281,"stop":1771528571281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771528571281,"stop":1771528571281,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771528571281,"stop":1771528571287,"duration":6},"status":"passed","steps":[],"attachments":[{"uid":"fad37fcdc1852d54","name":"envs.json","source":"fad37fcdc1852d54.json","type":"application/json","size":511}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Authority Db","time":{"start":1771528571288,"stop":1771528571458,"duration":170},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Client","time":{"start":1771528571458,"stop":1771528571459,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Registration User","time":{"start":1771528571459,"stop":1771528572903,"duration":1444},"status":"passed","steps":[{"name":"GET /register","time":{"start":1771528571491,"stop":1771528572105,"duration":614},"status":"passed","steps":[],"attachments":[{"uid":"f3ff9eb503fbe294","name":"Request","source":"f3ff9eb503fbe294.html","type":"text/html","size":2053},{"uid":"6da325fcd00a4de1","name":"0d9dc050-d69d-4f8b-9a8c-3b3b2bff693f-attachment.txt","source":"6da325fcd00a4de1.txt","type":"text/plain","size":3731}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"POST /register","time":{"start":1771528572119,"stop":1771528572903,"duration":784},"status":"passed","steps":[],"attachments":[{"uid":"2d985974bbf26e55","name":"Request","source":"2d985974bbf26e55.html","type":"text/html","size":2710},{"uid":"e1df0b587e5d9d2f","name":"d6bea3f6-b74c-4cf2-a19b-75ce31309015-attachment.txt","source":"e1df0b587e5d9d2f.txt","type":"text/plain","size":2279}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":false,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},{"name":"[S] Kafka","time":{"start":1771528578767,"stop":1771528578770,"duration":3},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] User Db","time":{"start":1771528579145,"stop":1771528579147,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Person Generator","time":{"start":1771528579147,"stop":1771528579149,"duration":2},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] User Data","time":{"start":1771528579149,"stop":1771528579149,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='licking_1881', password='.tE>o~cW', submit_password='.tE>o~cW', first_name='Дарина')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f5a8c1f4190>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f5a8dddc3a0>\nuser_db = <database.user_db.UserDb object at 0x7f5a8c1f70d0>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","steps":[{"name":"Check new record in auth db","time":{"start":1771528579777,"stop":1771528579790,"duration":13},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Check new record in userdata db","time":{"start":1771528579790,"stop":1771528579827,"duration":37},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/tests/kafka_tests/test_kafka.py\", line 42, in test_message_should_be_produced_to_userdata_after_kafka_event\n    assert user_db.get_user_by_username(username).username == username\n","steps":[],"attachments":[{"uid":"48759cb76f1fdf60","name":"select niffler-userdata","source":"48759cb76f1fdf60.txt","type":"text/plain","size":27},{"uid":"6a150d025da348f2","name":"select niffler-userdata","source":"6a150d025da348f2.txt","type":"text/plain","size":23},{"uid":"29b347bb2297bf7d","name":"show niffler-userdata","source":"29b347bb2297bf7d.txt","type":"text/plain","size":32},{"uid":"ec450082735cacfa","name":"SELECT niffler-userdata","source":"ec450082735cacfa.txt","type":"text/plain","size":169}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"kafka::0","time":{"start":1771528617566,"stop":1771528617574,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"KAFKA"},{"name":"epic","value":"Kafka"},{"name":"as_id","value":"600002"},{"name":"host","value":"runnervmwffz4"},{"name":"thread","value":"8809-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.kafka_tests.test_kafka"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":7,"skipped":0,"passed":0,"unknown":0,"total":7},"items":[{"uid":"6ac2b90d3108faef","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/31/#testresult/6ac2b90d3108faef","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771526339953,"stop":1771526340088,"duration":135}},{"uid":"d8dd82d5090914fb","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/30/#testresult/d8dd82d5090914fb","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771524786879,"stop":1771524787217,"duration":338}},{"uid":"26afc241ee06da5b","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/29/#testresult/26afc241ee06da5b","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771523338250,"stop":1771523338776,"duration":526}},{"uid":"a3bea73c647fbbd8","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/28/#testresult/a3bea73c647fbbd8","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771442809397,"stop":1771442809968,"duration":571}},{"uid":"947693e36afd12da","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/27/#testresult/947693e36afd12da","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771441718014,"stop":1771441718824,"duration":810}},{"uid":"3573d5b96b4d4e88","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/26/#testresult/3573d5b96b4d4e88","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771352549325,"stop":1771352549617,"duration":292}}]},"tags":["KAFKA"]},"source":"15b8c898b56243a6.json","parameterValues":[]}