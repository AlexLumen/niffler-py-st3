{"uid":"906f51990b04f73b","name":"Отображение сообщения об ошибке если пользователь уже существует","fullName":"tests.ui_tests.test_registration_page#test_visibility_error_message_when_user_is_existing","historyId":"4923a6ad7ec683c90cf2e588d9762df4","time":{"start":1771524897758,"stop":1771524903479,"duration":5721},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Username `Alex` already exists'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"//label[contains(text(), 'Username')]/span\")","statusTrace":"login_page = <pages.login_page.LoginPage object at 0x7f08f0227d00>\nregistration_page = <pages.registration_page.RegistrationPage object at 0x7f08ee1b1450>\npage = <Page url='http://auth.niffler.dc:9000/register'>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', spend_db_url='postgresql...trap_servers='localhost:9093', userdata_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-userdata')\n\n    @allure.feature(\"Страница Регистрации\")\n    @allure.title(\"Отображение сообщения об ошибке если пользователь уже существует\")\n    def test_visibility_error_message_when_user_is_existing(login_page, registration_page, page, envs):\n        login_page.click_create_new_account_button()\n        registration_page.send_username(envs.username)\n        registration_page.send_password(envs.password)\n        registration_page.send_submit_password(envs.password)\n        registration_page.click_sign_up_button()\n>       registration_page.check_user_already_exist_on_username_field(envs.username)\n\ntests/ui_tests/test_registration_page.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.registration_page.RegistrationPage object at 0x7f08ee1b1450>\nusername = 'Alex'\n\n    def check_user_already_exist_on_username_field(self, username):\n>       self.username_input_error_message.should_have_text(f\"Username `{username}` already exists\")\n\npages/registration_page.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_factory.paragraph.Paragraph object at 0x7f08ee1b3ca0>\ntext = 'Username `Alex` already exists', kwargs = {}\nlocator = <Locator frame=<Frame name= url='http://auth.niffler.dc:9000/register'> selector=\"xpath=//label[contains(text(), 'Username')]/span\">\n\n    def should_have_text(self, text, **kwargs):\n        with allure.step(f'Проверить что {self.type_of} \"{self.name}\" содержит текст \"{text}\"'):\n            locator = self.get_locator(**kwargs)\n>           expect(locator).to_have_text(text)\nE           AssertionError: Locator expected to have text 'Username `Alex` already exists'\nE           Actual value: None\nE           Error: element(s) not found \nE           Call log:\nE             - Expect \"to_have_text\" with timeout 5000ms\nE             - waiting for locator(\"//label[contains(text(), 'Username')]/span\")\n\npage_factory/component.py:65: AssertionError","flaky":true,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1771524781424,"stop":1771524781424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771524781425,"stop":1771524781425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1771524781425,"stop":1771524781425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771524781425,"stop":1771524781425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771524781425,"stop":1771524781429,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"c233e6b8467f495d","name":"envs.json","source":"c233e6b8467f495d.json","type":"application/json","size":511}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Authority Db","time":{"start":1771524781429,"stop":1771524781612,"duration":183},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Client","time":{"start":1771524781612,"stop":1771524781612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Registration User","time":{"start":1771524781614,"stop":1771524781639,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Browser","time":{"start":1771524897298,"stop":1771524897635,"duration":337},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Page","time":{"start":1771524897635,"stop":1771524897757,"duration":122},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Login Page","time":{"start":1771524897757,"stop":1771524897757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Registration Page","time":{"start":1771524897757,"stop":1771524897757,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Username `Alex` already exists'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"//label[contains(text(), 'Username')]/span\")","statusTrace":"login_page = <pages.login_page.LoginPage object at 0x7f08f0227d00>\nregistration_page = <pages.registration_page.RegistrationPage object at 0x7f08ee1b1450>\npage = <Page url='http://auth.niffler.dc:9000/register'>\nenvs = Envs(frontend_url='http://frontend.niffler.dc', gateway_url='http://gateway.niffler.dc:8090', spend_db_url='postgresql...trap_servers='localhost:9093', userdata_db_url='postgresql+psycopg2://postgres:secret@localhost:5432/niffler-userdata')\n\n    @allure.feature(\"Страница Регистрации\")\n    @allure.title(\"Отображение сообщения об ошибке если пользователь уже существует\")\n    def test_visibility_error_message_when_user_is_existing(login_page, registration_page, page, envs):\n        login_page.click_create_new_account_button()\n        registration_page.send_username(envs.username)\n        registration_page.send_password(envs.password)\n        registration_page.send_submit_password(envs.password)\n        registration_page.click_sign_up_button()\n>       registration_page.check_user_already_exist_on_username_field(envs.username)\n\ntests/ui_tests/test_registration_page.py:63: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <pages.registration_page.RegistrationPage object at 0x7f08ee1b1450>\nusername = 'Alex'\n\n    def check_user_already_exist_on_username_field(self, username):\n>       self.username_input_error_message.should_have_text(f\"Username `{username}` already exists\")\n\npages/registration_page.py:64: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <page_factory.paragraph.Paragraph object at 0x7f08ee1b3ca0>\ntext = 'Username `Alex` already exists', kwargs = {}\nlocator = <Locator frame=<Frame name= url='http://auth.niffler.dc:9000/register'> selector=\"xpath=//label[contains(text(), 'Username')]/span\">\n\n    def should_have_text(self, text, **kwargs):\n        with allure.step(f'Проверить что {self.type_of} \"{self.name}\" содержит текст \"{text}\"'):\n            locator = self.get_locator(**kwargs)\n>           expect(locator).to_have_text(text)\nE           AssertionError: Locator expected to have text 'Username `Alex` already exists'\nE           Actual value: None\nE           Error: element(s) not found \nE           Call log:\nE             - Expect \"to_have_text\" with timeout 5000ms\nE             - waiting for locator(\"//label[contains(text(), 'Username')]/span\")\n\npage_factory/component.py:65: AssertionError","steps":[{"name":"Нажать link  \"Create new account\"","time":{"start":1771524897758,"stop":1771524898022,"duration":264},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ввести в input \"Username\" значение \"Alex\"","time":{"start":1771524898022,"stop":1771524898103,"duration":81},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ввести в input \"Password\" значение \"SonyXperia\"","time":{"start":1771524898103,"stop":1771524898109,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Ввести в input \"Submit password\" значение \"SonyXperia\"","time":{"start":1771524898109,"stop":1771524898116,"duration":7},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Нажать button  \"Sign up\"","time":{"start":1771524898116,"stop":1771524898282,"duration":166},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Проверить что text \"Username error message\" содержит текст \"Username `Alex` already exists\"","time":{"start":1771524898282,"stop":1771524903284,"duration":5002},"status":"failed","statusMessage":"AssertionError: Locator expected to have text 'Username `Alex` already exists'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"//label[contains(text(), 'Username')]/span\")\n\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/page_factory/component.py\", line 65, in should_have_text\n    expect(locator).to_have_text(text)\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/sync_api/_generated.py\", line 20011, in to_have_text\n    self._sync(\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/_impl/_sync_base.py\", line 115, in _sync\n    return task.result()\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 561, in to_have_text\n    await self._expect_impl(\n  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/.venv/lib/python3.10/site-packages/playwright/_impl/_assertions.py\", line 85, in _expect_impl\n    raise AssertionError(\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"fecec490d95b0da0","name":"screenshotе","source":"fecec490d95b0da0.png","type":"image/png","size":586035}],"parameters":[],"stepsCount":6,"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"browser::teardown","time":{"start":1771524903486,"stop":1771524903527,"duration":41},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"feature","value":"Страница Регистрации"},{"name":"host","value":"runnervmieams"},{"name":"thread","value":"8651-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.ui_tests.test_registration_page"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":3,"broken":0,"skipped":0,"passed":2,"unknown":0,"total":5},"items":[{"uid":"caf6d0804aa520c3","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/29/#testresult/caf6d0804aa520c3","status":"failed","statusDetails":"AssertionError: Locator expected to have text 'Username `Alex` already exists'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"//label[contains(text(), 'Username')]/span\")","time":{"start":1771523447867,"stop":1771523453624,"duration":5757}},{"uid":"f4f3c49a0ad228d3","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/28/#testresult/f4f3c49a0ad228d3","status":"passed","time":{"start":1771442848011,"stop":1771442848633,"duration":622}},{"uid":"17b2bce727656a0b","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/27/#testresult/17b2bce727656a0b","status":"passed","time":{"start":1771441750658,"stop":1771441751372,"duration":714}},{"uid":"d0ca33187afd3dc9","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/26/#testresult/d0ca33187afd3dc9","status":"failed","statusDetails":"AssertionError: Locator expected to have text 'Username `Alex` already exists'\nActual value: None\nError: element(s) not found \nCall log:\n  - Expect \"to_have_text\" with timeout 5000ms\n  - waiting for locator(\"//label[contains(text(), 'Username')]/span\")","time":{"start":1771352663801,"stop":1771352669563,"duration":5762}}]},"tags":[]},"source":"906f51990b04f73b.json","parameterValues":[]}