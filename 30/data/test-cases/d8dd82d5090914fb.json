{"uid":"d8dd82d5090914fb","name":"KAFKA: Заполнение userdata исключая auth","fullName":"tests.kafka_tests.test_kafka#test_message_should_be_produced_to_userdata_after_kafka_event","historyId":"37d0a92236ad9bbc9a43e1bf5568b00e","time":{"start":1771524786879,"stop":1771524787217,"duration":338},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='pipeline_1982', password='BA3eV#bd', submit_password='BA3eV#bd', first_name='Варлам')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f08f10cdfc0>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f08f15a3fd0>\nuser_db = <database.user_db.UserDb object at 0x7f08f10cf550>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1771524781424,"stop":1771524781424,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771524781425,"stop":1771524781425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1771524781425,"stop":1771524781425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771524781425,"stop":1771524781425,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771524781425,"stop":1771524781429,"duration":4},"status":"passed","steps":[],"attachments":[{"uid":"c233e6b8467f495d","name":"envs.json","source":"c233e6b8467f495d.json","type":"application/json","size":511}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Authority Db","time":{"start":1771524781429,"stop":1771524781612,"duration":183},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Client","time":{"start":1771524781612,"stop":1771524781612,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Registration User","time":{"start":1771524781614,"stop":1771524781639,"duration":25},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Kafka","time":{"start":1771524785161,"stop":1771524785170,"duration":9},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] User Db","time":{"start":1771524786876,"stop":1771524786877,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Person Generator","time":{"start":1771524786877,"stop":1771524786878,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] User Data","time":{"start":1771524786878,"stop":1771524786878,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='pipeline_1982', password='BA3eV#bd', submit_password='BA3eV#bd', first_name='Варлам')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f08f10cdfc0>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f08f15a3fd0>\nuser_db = <database.user_db.UserDb object at 0x7f08f10cf550>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","steps":[{"name":"Check new record in auth db","time":{"start":1771524787168,"stop":1771524787184,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Check new record in userdata db","time":{"start":1771524787184,"stop":1771524787216,"duration":32},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/tests/kafka_tests/test_kafka.py\", line 42, in test_message_should_be_produced_to_userdata_after_kafka_event\n    assert user_db.get_user_by_username(username).username == username\n","steps":[],"attachments":[{"uid":"20a8a37011f5160","name":"select niffler-userdata","source":"20a8a37011f5160.txt","type":"text/plain","size":27},{"uid":"e8e7a76355256ba","name":"select niffler-userdata","source":"e8e7a76355256ba.txt","type":"text/plain","size":23},{"uid":"1a054b48bcb89458","name":"show niffler-userdata","source":"1a054b48bcb89458.txt","type":"text/plain","size":32},{"uid":"5e00bf0c2f7aaec7","name":"SELECT niffler-userdata","source":"5e00bf0c2f7aaec7.txt","type":"text/plain","size":170}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"kafka::0","time":{"start":1771524915021,"stop":1771524915029,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"tag","value":"KAFKA"},{"name":"as_id","value":"600002"},{"name":"epic","value":"Kafka"},{"name":"host","value":"runnervmieams"},{"name":"thread","value":"8651-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.kafka_tests.test_kafka"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":5,"skipped":0,"passed":0,"unknown":0,"total":5},"items":[{"uid":"26afc241ee06da5b","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/29/#testresult/26afc241ee06da5b","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771523338250,"stop":1771523338776,"duration":526}},{"uid":"a3bea73c647fbbd8","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/28/#testresult/a3bea73c647fbbd8","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771442809397,"stop":1771442809968,"duration":571}},{"uid":"947693e36afd12da","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/27/#testresult/947693e36afd12da","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771441718014,"stop":1771441718824,"duration":810}},{"uid":"3573d5b96b4d4e88","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/26/#testresult/3573d5b96b4d4e88","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771352549325,"stop":1771352549617,"duration":292}}]},"tags":["KAFKA"]},"source":"d8dd82d5090914fb.json","parameterValues":[]}