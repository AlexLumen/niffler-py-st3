{"uid":"26afc241ee06da5b","name":"KAFKA: Заполнение userdata исключая auth","fullName":"tests.kafka_tests.test_kafka#test_message_should_be_produced_to_userdata_after_kafka_event","historyId":"37d0a92236ad9bbc9a43e1bf5568b00e","time":{"start":1771523338250,"stop":1771523338776,"duration":526},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='mountain_1916', password='Qkm5ERqB', submit_password='Qkm5ERqB', first_name='Всеволод')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f30337437f0>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f30327e82b0>\nuser_db = <database.user_db.UserDb object at 0x7f3033742230>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"[S] Base Url","time":{"start":1771523333002,"stop":1771523333002,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Delete Output Dir","time":{"start":1771523333003,"stop":1771523333003,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S]  Verify Url","time":{"start":1771523333003,"stop":1771523333003,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Pytestconfig","time":{"start":1771523333003,"stop":1771523333003,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Envs","time":{"start":1771523333003,"stop":1771523333006,"duration":3},"status":"passed","steps":[],"attachments":[{"uid":"990c05139d73444b","name":"envs.json","source":"990c05139d73444b.json","type":"application/json","size":511}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"[S] Authority Db","time":{"start":1771523333006,"stop":1771523333203,"duration":197},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Auth Client","time":{"start":1771523333203,"stop":1771523333203,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Registration User","time":{"start":1771523333204,"stop":1771523333226,"duration":22},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] Kafka","time":{"start":1771523336714,"stop":1771523336726,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[S] User Db","time":{"start":1771523338245,"stop":1771523338246,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] Person Generator","time":{"start":1771523338246,"stop":1771523338247,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"[F] User Data","time":{"start":1771523338247,"stop":1771523338247,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'","statusTrace":"user_data = UserData(username='mountain_1916', password='Qkm5ERqB', submit_password='Qkm5ERqB', first_name='Всеволод')\nkafka = <clients.kafka_client.KafkaClient object at 0x7f30337437f0>\nauthority_db = <database.authority_db.AuthorityDb object at 0x7f30327e82b0>\nuser_db = <database.user_db.UserDb object at 0x7f3033742230>\n\n    @id(\"600002\")\n    @title(\"KAFKA: Заполнение userdata исключая auth\")\n    @tag(\"KAFKA\")\n    def test_message_should_be_produced_to_userdata_after_kafka_event(user_data, kafka, authority_db, user_db):\n        username = user_data.username\n        print(\"username\", username)\n        kafka.sent_event(KAFKA_TOPIC, username)\n    \n        with step(\"Check new record in auth db\"):\n            assert authority_db.get_user_by_user_name(username) is None\n    \n        with step(\"Check new record in userdata db\"):\n>           assert user_db.get_user_by_username(username).username == username\nE           AttributeError: 'NoneType' object has no attribute 'username'\n\ntests/kafka_tests/test_kafka.py:42: AttributeError","steps":[{"name":"Check new record in auth db","time":{"start":1771523338729,"stop":1771523338741,"duration":12},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Check new record in userdata db","time":{"start":1771523338741,"stop":1771523338775,"duration":34},"status":"broken","statusMessage":"AttributeError: 'NoneType' object has no attribute 'username'\n","statusTrace":"  File \"/home/runner/work/niffler-py-st3/niffler-py-st3/niffler-tests-python/tests/kafka_tests/test_kafka.py\", line 42, in test_message_should_be_produced_to_userdata_after_kafka_event\n    assert user_db.get_user_by_username(username).username == username\n","steps":[],"attachments":[{"uid":"a91530dfc144b2a0","name":"select niffler-userdata","source":"a91530dfc144b2a0.txt","type":"text/plain","size":27},{"uid":"ecff643c0dda51e2","name":"select niffler-userdata","source":"ecff643c0dda51e2.txt","type":"text/plain","size":23},{"uid":"ec7001a8f5b2df6e","name":"show niffler-userdata","source":"ec7001a8f5b2df6e.txt","type":"text/plain","size":32},{"uid":"838a43088ea39cb1","name":"SELECT niffler-userdata","source":"838a43088ea39cb1.txt","type":"text/plain","size":170}],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":2,"shouldDisplayMessage":true,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"kafka::0","time":{"start":1771523464946,"stop":1771523464954,"duration":8},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"epic","value":"Kafka"},{"name":"as_id","value":"600002"},{"name":"tag","value":"KAFKA"},{"name":"host","value":"runnervmieams"},{"name":"thread","value":"8682-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.kafka_tests.test_kafka"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Test defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":0,"broken":4,"skipped":0,"passed":0,"unknown":0,"total":4},"items":[{"uid":"a3bea73c647fbbd8","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/28/#testresult/a3bea73c647fbbd8","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771442809397,"stop":1771442809968,"duration":571}},{"uid":"947693e36afd12da","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/27/#testresult/947693e36afd12da","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771441718014,"stop":1771441718824,"duration":810}},{"uid":"3573d5b96b4d4e88","reportUrl":"https://AlexLumen.github.io/niffler-py-st3/26/#testresult/3573d5b96b4d4e88","status":"broken","statusDetails":"AttributeError: 'NoneType' object has no attribute 'username'","time":{"start":1771352549325,"stop":1771352549617,"duration":292}}]},"tags":["KAFKA"]},"source":"26afc241ee06da5b.json","parameterValues":[]}